<!DOCTYPE html>
<html lang="en">
<head>
	<title>Home</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" type="text/css" href="style.css">
	<link rel="stylesheet" type="text/css" href="home.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">

	<script>
    document.addEventListener("DOMContentLoaded", function() {
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        const pseudo = getQueryParam('pseudo');
		const usernameElement = document.getElementById('username');
		const uploadForm = document.getElementById('upload-form');
		const imageGallery = document.getElementById('image-gallery');

        if (pseudo) {
            document.getElementById('username').textContent = pseudo;
            sessionStorage.setItem('pseudo', pseudo);
			uploadForm.style.display = 'block';
        } else {
            document.getElementById('username').textContent = "Stranger";
			uploadForm.style.display = 'none';
        }
	    fetch('uploads/')
            .then(response => response.text())
            .then(data => {
                const parser = new DOMParser();
                const htmlDoc = parser.parseFromString(data, 'text/html');
                const links = htmlDoc.querySelectorAll('a');
                const imagesDiv = document.getElementById('images');

                links.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href.match(/\.(jpg|jpeg|png|gif|webp)$/i)) {
                        const img = document.createElement('img');
                        img.src = `uploads/${href}`;
                        img.alt = href;
                        img.style.width = "150px";
                        img.style.margin = "10px";
                        imagesDiv.appendChild(img);
                    }
                });
            });
    });
	</script>
</head>
<body>
<div class="body_index">
	<nav class="navbar fixed-top">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">WEBSERV</a>
			<div class="d-flex">
				<a href="index.html"><img class="navbar_icons" style="margin-right: 15px;" src="home.svg" alt="Go Home"></a>
				<a href="register.html"><img class="navbar_icons" src="user.svg" alt="Register"></a>
			</div>
		</div>
	</nav>
	<div class="bgimg w3-display-container w3-animate-opacity w3-text-white">
		<div class="w3-display-middle">
			<h1 class="w3-jumbo w3-animate-top greetings" style="color: rgba(10, 76, 53, 0.779);">
			    Hello <span id="username">!</span> &#x1F49A;
			</h1>
			<hr class="w3-border-blue" style="margin:auto;width:50%;margin-top: 15px;">
		</div>
	</div>
	<div class="container-fluid" style="margin-top:15px; height: 500px;">
		<div class="container" style="margin-bottom: 25px;">
			<h2 class="text-center" style="color: antiquewhite;font-size: xx-large; font-weight: 700; letter-spacing: 10px;">...</h2>
		</div>
		<div class="container">
			<div class="row">
				<div class="col-sm-4 description">
					<h3>What is Webserv?</h3>
					<p>Webserv is a simple web server that allows you to host your own website. It is a lightweight and easy-to-use web server that is perfect for hosting small websites or testing your web development projects.</p>
				</div>
				<div class="col-sm-4 description">
					<h3>Why use Webserv?</h3>
					<p>Webserv is a great tool for web developers who want to test their websites locally before deploying them to a live server. It is also a good option for hosting small websites that don't require a lot of resources.</p>
				</div>
				<div class="col-sm-4 description">
					<h3>How to get started?</h3>
					<p>To get started with Webserv, simply download the software and install it on your computer. Once installed, you can start the web server and access your website by entering the URL in your web browser.</p>
				</div>
			</div>
		</div>

		<div class="container uploader">
			<div class="row">
				<div class="col-sm-2 description"></div>
				<div class="col-sm-8 description">
					<div class="row">
						<div class="col-sm-3 description"></div>
						<div class="col-sm-6 description">
							<form id="upload-form" action="upload.py" method="post" enctype="multipart/form-data" style="display: none;">
								<label for="image" class="form-label me-2 uploading_description">Partage une image !</label>
								<div class="mb-3 d-flex align-items-center">
									<input type="file" class="form-control uploading me-2" id="image" name="image" required>
									<button type="submit" class="btn btn-primary uploading_btn">Go &#x1F331;</button>
								</div>
							</form>
						</div>
						<div class="col-sm-3 description"></div>
					</div>
				</div>
				<div class="col-sm-2 description"></div>
		</div>
	</div>
</div>
</body>
<footer>
	<div class="footer">
		<p>&copy; 2025 WebServ</p>
	</div>
</footer>
</html>
